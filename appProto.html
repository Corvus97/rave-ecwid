<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://djqizrxa6f10j.cloudfront.net/ecwid-sdk/js/1.2.1/ecwid-app.js"></script>
<link rel="stylesheet" href="https://djqizrxa6f10j.cloudfront.net/ecwid-sdk/css/1.2.2/ecwid-app-ui.css"/>
<link rel="stylesheet" href="thankYouIframe.css"/>

<script>
    // Initialize the application
    EcwidApp.init({
      app_id: "rave-payments", 
      autoloadedflag: true, 
      autoheight: true
    });

	// Get store info
	var storeData = EcwidApp.getPayload();
	var storeId = storeData.store_id;
	var accessToken = storeData.access_token;
	var lang = storeData.lang;

	// Interface translations

	// var en = {
	// 	title: "Flutterwave Rave",
	// 	storeUrl: "Redirect destination URL",
	// 	enabled: "Enable the redirect",
	// 	delay: "Delay before redirect (milliseconds)",
	// 	save: "Save settings",
	// 	enabledCheck: "enabled",
	// 	enabledUnCheck: "disabled",
	// 	description: "Once enabled, your customers will be redirected to the specified destination URL after their order is placed."
	// }

	// Load translations depending on language of Ecwid CP
	// var languagePack = [ru, en];

	// if (lang == 'ru') {
	// 	lang = 0;
	// 	document.querySelector('html').setAttribute('lang','ru');
	// } else {
	// 	lang = 1;
	// 	document.querySelector('html').setAttribute('lang','en');
	// }
	// document.querySelector('html').setAttribute('lang','en');
</script>

<script>
// Display elements depending on the app mode chosen by user

function selected() {
	var dropDown = document.querySelector(".checkbox input").checked;

	if(dropDown) {
		document.querySelector("#testPub").style.display = 'none';
		document.querySelector("#testSec").style.display = 'none';
		document.querySelector("#test-keys").style.display = 'none';
		document.querySelector("#livePublicKey").disabled = false;
		document.querySelector("#liveSecretKey").disabled = false;
		document.querySelector("#livePub").style.display = 'table-row';
		document.querySelector("#liveSec").style.display = 'table-row';
		document.querySelector("#live-keys").style.display = 'block';
		document.querySelector("#testPublicKey").disabled = true;
		document.querySelector("#testSecretKey").disabled = true;
	} else {
		document.querySelector("#testPub").style.display = 'table-row';
		document.querySelector("#testSec").style.display = 'table-row';
		document.querySelector("#test-keys").style.display = 'block';
		document.querySelector("#livePublicKey").disabled = true;
		document.querySelector("#liveSecretKey").disabled = true;
		document.querySelector("#livePub").style.display = 'none';
		document.querySelector("#liveSec").style.display = 'none';
		document.querySelector("#live-keys").style.display = 'none';
		document.querySelector("#testPublicKey").disabled = false;
		document.querySelector("#testSecretKey").disabled = false;
	}
}
</script>

<script src="raveIframe.js"></script>

</head>
<body class="normalized">
<div class="header">
	<h1>Flutterwave Rave</h1>
	<p class="sub">Ensuring secure payments</p>
</div>

<p id="test-keys" class="get">Get your Test API keys <a target="_blank" href="https://raveappv2.herokuapp.com/dashboard/settings/apis">here</a></p>

<p id="live-keys" class="get">Get your Live API keys <a target="_blank" href="https://rave.flutterwave.com/dashboard/settings/apis">here</a></p>

<table>
	<tr>
	<!-- Select the mode of the application -->

		<td>Test/Live</td>
		<td id="checkbox">
			<label class="checkbox big">
	    		<input type="checkbox" name="" id="env" onchange="selected()">
	    			<div data-on="live" data-off="test">
	        		<div></div>
	    		</div>
			</label>
			<br>
		</td>
	</tr>
	<tr class="test" id="testPub">
		<!-- Field to set the test public key -->
		<td>Test Public Key</td>
		<td class="pad-b-null">
			<div class="input-append">
	 			<input type="text" class="form-control" id="testPublicKey" placeholder="FLWPUBK-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-X" value="">
	 			<a class="input-addon"></a>
			</div>
			<span class="danger">*required</span>
		</td>
	</tr>
	<tr class="test"  id="testSec">
		<!-- Field to set the test secret key -->
		<td>Test Secret Key</td>
		<td class="pad-b-null">
			<div class="input-append">
	 			<input type="text" class="form-control" id="testSecretKey" placeholder="FLWSECK-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-X" value="">
	 			<a class="input-addon"></a>
			</div>
			<span class="danger">*required</span>
		</td>
	</tr>
	<tr class="live" id="livePub">
		<!-- Field to set the live public key -->
		<td>Live Public Key</td>
		<td class="pad-b-null">
			<div class="input-append">
	 			<input type="text" class="form-control" id="livePublicKey" placeholder="FLWPUBK-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-X" value="">
	 			<a class="input-addon"></a>
			</div>
			<span class="danger">*required</span>
		</td>
	</tr>
	<tr class="live" id="liveSec">
		<!-- Field to set the live secret key -->
		<td>Live Secret Key</td>
		<td class="pad-b-null">
			<div class="input-append">
	 			<input type="text" class="form-control" id="liveSecretKey" placeholder="FLWSECK-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-X" value="">
	 			<a class="input-addon"></a>
			</div>
			<span class="danger">*required</span>
		</td>
	</tr>
	<tr>
		<!-- Field to set the logo -->
		<td>Logo</td>
		<td>
			<div class="input-append">
	 			<input type="text" class="form-control" id="logo" placeholder="https://ecwid.com/logo.png" value="">
	 			<a class="input-addon"></a>
			</div>
		</td>
	</tr>
	<tr>
		<td>Country</td>
		<td>
			<select class="form-control" id="country">
				<option value="NG">Nigeria</option>
				<option value="KE">Kenya</option>
				<option value="GH">Ghana</option>
				<option value="ZA">South Africa</option>
			</select>
		</td>
	</tr>
	<tr>
		<td>Payment Method</td>
		<td>
			<select class="form-control" id="pm">
				<option value="both">All</option>
				<option value="card">Cards Only</option>
				<option value="account">Account Only</option>
				<option value="ussd">USSD Only</option>
			</select>
		</td>
	</tr>
	<tr id="delay">
		<td>Lang Pack</td>
		<td>
			<!-- Hidden delay before redirect feature input -->
			<div>
 				<input type="number" class="form-control" id="delay" placeholder="5000" value="">
			</div>
		</td>
	</tr>
	<tr>
		<td id="saving" colspan='2'>
		<button class="btn btn-primary btn-large" onClick="saveUserData();" id="save">
	<span>Save</span>  
    <div class="loader">
        <div class="spinner spin-right">
            <svg width="60px" height="60px" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path class="loader-outer" d="M30,60 C46.5685425,60 60,46.5685425 60,30 C60,13.4314575 46.5685425,0 30,0 C13.4314575,0 0,13.4314575 0,30 C0,46.5685425 13.4314575,60 30,60 L30,60 Z"></path>
                <path class="loader-background" d="M30,56 C44.3594035,56 56,44.3594035 56,30 C56,15.6405965 44.3594035,4 30,4 C15.6405965,4 4,15.6405965 4,30 C4,44.3594035 15.6405965,56 30,56 L30,56 Z" fill="#FFFFFF"></path>
                <path class="loader-inner" d="M12.0224719,32.0224719 C10.9078652,32.0224719 10,31.1146067 10,30 C10,18.9707865 18.9707865,10 30,10 C31.1146067,10 32.0224719,10.9078652 32.0224719,12.0224719 C32.0224719,13.1370787 31.1146067,14.0449438 30,14.0449438 C21.2,14.0449438 14.0449438,21.2 14.0449438,30 C14.0449438,31.1146067 13.1370787,32.0224719 12.0224719,32.0224719 L12.0224719,32.0224719 Z M30,50 C28.8853933,50 27.9775281,49.0921348 27.9775281,47.9775281 C27.9775281,46.8629213 28.8853933,45.9550562 30,45.9550562 C38.8,45.9550562 45.9550562,38.8 45.9550562,30 C45.9550562,28.8853933 46.8629213,27.9775281 47.9775281,27.9775281 C49.0921348,27.9775281 50,28.8853933 50,30 C50,41.0292135 41.0292135,50 30,50 L30,50 Z" fill="#231F20"></path>
            </svg>
        </div>
    </div>
</button>
		</td>
	</tr>
</table>

</body>
</html>